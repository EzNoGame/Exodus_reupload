[gd_scene load_steps=5 format=2]

[ext_resource path="res://MainGame/Maps/Lab/background/lab_bg.jpg" type="Texture" id=1]
[ext_resource path="res://Assets/icons/checkmark.png" type="Texture" id=3]
[ext_resource path="res://Menu/Backgound/MainMenuBackgound.png" type="Texture" id=4]

[sub_resource type="GDScript" id=1]
script/source = "extends Control

var FilePath : String = \"res://GameData/Temp.json\"
var MapName : String
var data = {}

func _ready():
	$HBoxContainer/VBoxContainer/Lab.grab_focus()
	var file = File.new()
	if file.open(FilePath, File.READ) == OK:
		file.open(FilePath, File.READ)
		var json = JSON.parse(file.get_as_text())
		file.close()
		data = json.result
	else:
		print(\"json file invalid\")
		
	for button in get_tree().get_nodes_in_group(\"maps\"):
		button.connect(\"pressed\", self, \"_some_button_pressed\", [button])
		
	pass # Replace with function body.

func _some_button_pressed(button):
	data[\"RoundData\"][\"MapName\"] = button.name
	var savefile = File.new()
	savefile.open(FilePath, File.WRITE)
	savefile.store_line(to_json(data))
	savefile.close()
	get_tree().change_scene(\"res://Menu/Menus/CharacterPicking.tscn\")
	
# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta):
	MapName = get_focus_owner().name
	get_node(\"NameOfMap\").text = \"Current Map: %s\" % [MapName]
	pass
"

[node name="MapPickingMenu" type="Control"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_top = -5.0
script = SubResource( 1 )

[node name="Control" type="Control" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0

[node name="TextureRect" type="TextureRect" parent="Control"]
anchor_right = 1.0
anchor_bottom = 1.0
texture = ExtResource( 4 )
expand = true

[node name="HBoxContainer" type="HBoxContainer" parent="."]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -320.0
margin_top = -150.0
margin_right = 320.0
margin_bottom = 150.0
custom_constants/separation = 10

[node name="VBoxContainer" type="VBoxContainer" parent="HBoxContainer"]
margin_right = 100.0
margin_bottom = 300.0
rect_min_size = Vector2( 100, 300 )
size_flags_horizontal = 4
size_flags_vertical = 4
custom_constants/separation = 20

[node name="Lab" type="TextureButton" parent="HBoxContainer/VBoxContainer" groups=["maps"]]
margin_left = 18.0
margin_right = 82.0
margin_bottom = 64.0
rect_min_size = Vector2( 64, 64 )
size_flags_horizontal = 4
size_flags_vertical = 4
texture_normal = ExtResource( 1 )
texture_focused = ExtResource( 3 )
expand = true
stretch_mode = 6

[node name="Barn" type="TextureButton" parent="HBoxContainer/VBoxContainer" groups=["maps"]]
margin_left = 18.0
margin_top = 84.0
margin_right = 82.0
margin_bottom = 148.0
rect_min_size = Vector2( 64, 64 )
size_flags_horizontal = 4
size_flags_vertical = 4
texture_focused = ExtResource( 3 )
expand = true

[node name="Graveyard" type="TextureButton" parent="HBoxContainer/VBoxContainer" groups=["maps"]]
margin_left = 18.0
margin_top = 168.0
margin_right = 82.0
margin_bottom = 232.0
rect_min_size = Vector2( 64, 64 )
size_flags_horizontal = 4
size_flags_vertical = 4
texture_focused = ExtResource( 3 )
expand = true

[node name="VBoxContainer2" type="VBoxContainer" parent="HBoxContainer"]
margin_left = 110.0
margin_right = 210.0
margin_bottom = 300.0
rect_min_size = Vector2( 100, 300 )
size_flags_horizontal = 4
size_flags_vertical = 4
custom_constants/separation = 20

[node name="Pacman" type="TextureButton" parent="HBoxContainer/VBoxContainer2" groups=["maps"]]
margin_left = 18.0
margin_right = 82.0
margin_bottom = 64.0
rect_min_size = Vector2( 64, 64 )
size_flags_horizontal = 4
size_flags_vertical = 4
texture_focused = ExtResource( 3 )
expand = true

[node name="Castle" type="TextureButton" parent="HBoxContainer/VBoxContainer2" groups=["maps"]]
margin_left = 18.0
margin_top = 84.0
margin_right = 82.0
margin_bottom = 148.0
rect_min_size = Vector2( 64, 64 )
size_flags_horizontal = 4
size_flags_vertical = 4
texture_focused = ExtResource( 3 )
expand = true

[node name="Circus" type="TextureButton" parent="HBoxContainer/VBoxContainer2" groups=["maps"]]
margin_left = 18.0
margin_top = 168.0
margin_right = 82.0
margin_bottom = 232.0
rect_min_size = Vector2( 64, 64 )
size_flags_horizontal = 4
size_flags_vertical = 4
texture_focused = ExtResource( 3 )
expand = true

[node name="NameOfMap" type="Label" parent="."]
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
margin_left = -509.0
margin_top = -65.0
margin_right = 512.0
text = "Current Pick: dfsfsdfs dsadsda"
align = 1

[connection signal="pressed" from="HBoxContainer/VBoxContainer/Lab" to="." method="_on_Lab_pressed"]
[connection signal="pressed" from="HBoxContainer/VBoxContainer/Barn" to="." method="_on_Barn_pressed"]
[connection signal="pressed" from="HBoxContainer/VBoxContainer/Graveyard" to="." method="_on_Graveyard_pressed"]
[connection signal="pressed" from="HBoxContainer/VBoxContainer2/Pacman" to="." method="_on_Pacman_pressed"]
[connection signal="pressed" from="HBoxContainer/VBoxContainer2/Castle" to="." method="_on_Castle_pressed"]
[connection signal="pressed" from="HBoxContainer/VBoxContainer2/Circus" to="." method="_on_Circus_pressed"]
